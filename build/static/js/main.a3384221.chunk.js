(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{38:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var c=t(14),u=t.n(c),r=t(3),i=t(2),o=t(4),a=t.n(o),l="/api/persons",s=function(){return a.a.get(l).then((function(e){return e.data}))},d=function(e){return a.a.post(l,e).then((function(e){return e.data}))},f=function(e){return a.a.delete("".concat(l,"/").concat(e)).then((function(e){return e.data}))},b=function(e,n){return a.a.put("".concat(l,"/").concat(e),n).then((function(e){return e.data}))},j=t(0),h=function(e){var n=e.message;return null===n?null:Object(j.jsx)("div",{className:"notif",children:n})},m=function(e){var n=e.message;return null===n?null:Object(j.jsx)("div",{className:"error",children:n})},O=function(e){var n=e.person,t=e.deleteNumber;return Object(j.jsxs)("div",{children:[n.name," ",n.number,"  ",Object(j.jsx)("button",{onClick:t,children:" delete "})]})},v=function(e){return Object(j.jsx)("form",{onSubmit:e.filterNames,children:Object(j.jsxs)("div",{children:["filter shown with ",Object(j.jsx)("input",{value:e.filter,onChange:e.handleFilterChange}),Object(j.jsx)("button",{type:"submit",children:"filter"})]})})},x=function(e){return Object(j.jsx)("div",{children:Object(j.jsxs)("form",{onSubmit:e.addName,children:[Object(j.jsxs)("div",{children:["name: ",Object(j.jsx)("input",{value:e.name,onChange:e.nameChange})]}),Object(j.jsxs)("div",{children:["number: ",Object(j.jsx)("input",{value:e.number,onChange:e.numberChange})]}),Object(j.jsx)("div",{children:Object(j.jsx)("button",{type:"submit",children:"add"})})]})})},p=function(e){return Object(j.jsx)("div",{children:e.showPersons.map((function(n){return Object(j.jsx)(O,{person:n,deleteNumber:function(){return e.deleteNumber(n.id,n.name)}},n.id)}))})},g=function(){var e=Object(i.useState)([]),n=Object(r.a)(e,2),t=n[0],c=n[1],u=Object(i.useState)([]),o=Object(r.a)(u,2),a=o[0],l=o[1];Object(i.useEffect)((function(){console.log("effect"),s().then((function(e){console.log("promise fulfilled"),c(e),l(e)}))}),[]);var O=Object(i.useState)(""),g=Object(r.a)(O,2),w=g[0],C=g[1],N=Object(i.useState)(""),S=Object(r.a)(N,2),y=S[0],k=S[1],T=Object(i.useState)(""),D=Object(r.a)(T,2),P=D[0],A=D[1],E=Object(i.useState)(null),F=Object(r.a)(E,2),J=F[0],L=F[1],B=Object(i.useState)(null),I=Object(r.a)(B,2),q=I[0],z=I[1];return Object(j.jsxs)("div",{children:[Object(j.jsx)("h2",{children:"Phonebook"}),Object(j.jsx)(h,{message:q}),Object(j.jsx)(m,{message:J}),Object(j.jsx)(v,{filterNames:function(e){e.preventDefault();var n=t.filter((function(e){return e.name.toLowerCase().includes(P.toLowerCase())}));l(n)},filter:P,handleFilterChange:function(e){A(e.target.value)}}),Object(j.jsx)("h2",{children:"Add a new contact"}),Object(j.jsx)(x,{name:w,number:y,nameChange:function(e){C(e.target.value)},numberChange:function(e){k(e.target.value)},addName:function(e){if(e.preventDefault(),t.some((function(e){return e.name===w}))){if(window.confirm("".concat(w," is already added to phonebook, would you like to replace the old number with a new one?"))){var n=t.find((function(e){return e.name===w})),u=n.id;b(u,{name:w,number:y}).then((function(e){c(t.map((function(n){return n.id!==u?n:e}))),l(t.map((function(n){return n.id!==u?n:e}))),z("Changed  the number of "+w),setTimeout((function(){z(null)}),4e3)})).catch((function(e){L(n.name+" has already been deleted from the server"),setTimeout((function(){L(null)}),4e3)}))}}else d({name:w,number:y}).then((function(e){c(t.concat(e)),l(t.concat(e))})),z("Added "+w),setTimeout((function(){z(null)}),4e3);C(""),k(""),A("")}}),Object(j.jsx)("h2",{children:"Numbers"}),Object(j.jsx)(p,{persons:t,showPersons:a,deleteNumber:function(e,n){window.confirm("Delete "+n+"?")&&f(e).then((function(u){console.log(u),z("Deleted "+n),setTimeout((function(){z(null)}),4e3),c(t.filter((function(n){return n.id!==e}))),l(t.filter((function(n){return n.id!==e})))})).catch((function(e){L(n+" has already been deleted from the server"),setTimeout((function(){L(null)}),4e3)}))}})]})};t(38);u.a.render(Object(j.jsx)(g,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.a3384221.chunk.js.map